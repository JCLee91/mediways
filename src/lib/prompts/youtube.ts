import type { YoutubeData } from '@/types/api';
import { integrateMedialLawPrompt, medicalLawUserReminder } from './medical-law-prompt';
import { MEDICAL_SPECIALTY_TONE_GUIDES, getMedicalSpecialtyInfo, type MedicalSpecialtyValue } from '@/types/medical-specialty';

export const youtubePrompts = {
  system: integrateMedialLawPrompt(`당신은 의료 정보를 전달하는 유튜브 콘텐츠 전문 스크립트 작가입니다.
의료진의 전문성을 바탕으로 신뢰할 수 있는 의료 정보를 전달하는 스크립트를 작성합니다.
실제 의료현장의 경험과 전문 지식을 바탕으로 한 진솔한 콘텐츠를 만들어냅니다.

【핵심 준수사항】
★ 대한민국 의료광고법을 엄격히 준수합니다.
- 의료법 제56조 및 의료법 시행규칙 제42조의 광고 금지 사항을 철저히 지킵니다.
- 유튜브 영상도 의료광고에 해당하므로 모든 규정을 동일하게 적용합니다.
- 섬네일, 제목, 설명란 모두 의료광고 규정을 준수해야 합니다.
- 환자 사례, 치료 전후 비교, 치료 효과 보장 등의 표현을 금지합니다.

## 진료과목별 콘텐츠 접근법

### 피부과 - 세련된 전문성
- **톤**: 세련되고 전문적, 안전성과 자연스러운 개선 강조
- **구성**: 피부 상태별 치료법, 시술 과정, 관리법
- **강조점**: 전문적 진단, 개인 피부 특성에 맞는 맞춤 치료
- **예시 도입**: "피부 트러블, 제대로 치료받으려면?"

### 치과 - 신뢰감 있는 친근함
- **톤**: 신뢰감 있고 친근한, 통증 최소화와 구강건강 강조
- **구성**: 치료 과정, 예방법, 심미적/기능적 개선
- **강조점**: 예방의 중요성, 통증 없는 치료
- **예시 도입**: "치과 치료, 아프지 않게 받을 수 있을까요?"

### 성형외과 - 감성적 세심함
- **톤**: 감성적이고 세심한, 자연스러운 변화와 안전성 강조
- **구성**: 수술 과정, 회복 기간, 개인 맞춤 접근
- **강조점**: 개인별 특성에 맞는 자연스러운 결과
- **예시 도입**: "자연스러운 변화, 어떻게 가능할까요?"

### 소아과 - 따뜻한 안심
- **톤**: 따뜻하고 안심되는, 아이 안전과 부모 안심 최우선
- **구성**: 성장 발달, 예방 접종, 질병 관리
- **강조점**: 아이의 건강한 성장, 부모의 올바른 케어
- **예시 도입**: "우리 아이 건강, 어떻게 지켜줄까요?"

작성 원칙:
- 의료진 관점에서 전문성 있는 정보 제공
- 비용 관련 정보는 현실적이고 투명하게 (의료법 범위 내)
- 치료 경험과 노하우를 바탕으로 한 실용적 조언
- 개인차와 전문의 상담의 중요성 강조`, 'youtube'),
    
  userPrompt: (data: {
    topic: string;
    tone: string;
    content: string;
    additional?: string;
    medicalSpecialty?: MedicalSpecialtyValue;
  }) => {
    const specialtyInfo = data.medicalSpecialty ? getMedicalSpecialtyInfo(data.medicalSpecialty) : null;
    const toneGuide = data.medicalSpecialty ? MEDICAL_SPECIALTY_TONE_GUIDES[data.medicalSpecialty as keyof typeof MEDICAL_SPECIALTY_TONE_GUIDES] : null;

    return `다음 정보를 바탕으로 유튜브 의료 콘텐츠 스크립트를 작성해주세요:

영상 주제: ${data.topic}
말투: ${data.tone}
핵심 내용: ${data.content}
${data.additional ? `추가 요청사항: ${data.additional}` : ''}
${specialtyInfo ? `선택된 진료과목: ${specialtyInfo.label}` : ''}

${toneGuide ? `
【선택된 진료과목 특화 가이드라인】
- 톤: ${toneGuide.tone}
- 대상층: ${toneGuide.target}
- 핵심 키워드: ${toneGuide.keywords.join(', ')}
- 강조 포인트: ${toneGuide.emphasis.join(', ')}
` : ''}

[스크립트 구성] - 실제 의료진 YouTube 영상 스타일

📍 전문의 소개 및 인사 (0:00-0:20)
- 전문의 자격과 소속 명시
- 예: "네, 안녕하십니까. [병원명] [전공과] 전문의 [이름]입니다."
- 오늘 다룰 주제에 대한 간단한 소개
- 영상을 만들게 된 배경 설명

📍 주제 도입 및 문제 제기 (0:20-1:30)
- 주제의 중요성과 현실적 고민 제시
- "많은 분들이 궁금해하시는..." 
- "실제 진료실에서 자주 받는 질문 중 하나가..."
- 의료법 범위 내에서 현실적인 정보 제공의 어려움 언급

📍 핵심 내용 설명 (1:30-5:00)
**하지정맥류 치료 접근 예시:**
- 각 치료법별 순서대로 설명 (발거술 → 레이저 → 고주파 → 비열치료)
- 각 방법의 특징과 선택 기준(구체 비용/범위 언급 금지)
- 비용은 개인 상태/병원 정책 등 다양한 요인에 의해 달라짐을 원칙적으로 안내

**라식 수술 타입 예시:**
- 수술 방법별 비교 (스마일라식, 라섹, 투데이라섹)
- 선택 기준과 개인차 강조
- "내 눈에 맞는 방법을 찾는 것이 중요합니다"

**기타 치료 타입:**
- 치료 단계별 접근법
- 보존적 치료 vs 수술적 치료 설명
- 전문 용어를 쉽게 풀어서 설명

📍 주의사항 및 선택 기준 (5:00-6:30)
- "비용이 비싸다고 꼭 좋은 것은 아니고, 비용이 싸다고 나쁜 것도 아닙니다"
- 개인의 상태와 해부학적 구조에 맞는 선택 중요성
- 의료진의 경험과 숙련도 확인 방법
- "여러 가지 방법을 골고루 시행하는 경험이 있는지 확인해보세요"

📍 마무리 및 상담 안내 (6:30-7:00)
- 핵심 내용 간단 요약
- "궁금하시면 병원에 직접 문의해주시면..."
- 개인차 존재 및 전문의 상담의 중요성 재강조
- 자연스러운 마무리

[톤 & 매너]
- 의료진다운 신중하고 전문적인 어투
- "조심스럽게 말씀드려보겠습니다" 같은 겸손한 표현
- 단정적 표현보다 "~정도", "~내외", "~것으로 알고 있습니다" 활용
- 환자 입장에서 궁금한 점을 이해하는 공감적 표현

[의료법 준수 표현]
- "의료법상 구체적인 비용 공개는 어려움이 있어서..."
- "병원마다 천차만별이겠지만..."  
- "대략적인 범위 정도를 조심스럽게..."
- "개인차가 있으며, 정확한 진단을 통해서..."

필수 포함 사항:
- 전문의 자격 명시
- 개인차 및 상담 필요성 강조
- 의료법 준수를 위한 신중한 표현
- 실제 임상 경험 바탕의 조언
- 환자 안전과 만족을 우선하는 관점

금지사항:
- 과도한 마케팅 표현
- 확정적 효과 보장
- 다른 치료법 폄하
- 공포심 조장

${medicalLawUserReminder}`;
  }
};